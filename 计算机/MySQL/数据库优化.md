---
title: 数据库优化
updated: 2022-11-27T01:38:31
created: 2022-09-22T14:15:10
---

**使用索引**
　　索引是为了加速对数据进行检索而创建的一种分散的、物理的数据结构。
索引包含从表生成的键，以及映射到指定数据行的存储位置指针。

索引是依赖于表建立的，提供了数据库中编排表中数据的内部方法。

表的存储由两部分组成，一部分是表的数据页面，另一部分是索引页面，索引就存放在索引页面上。
　　数据库中的索引形式与图书的目录相似，键值就像目录中的标题，指针相当于页码。索引的功能就像图书目录能为读者提供快速查找图书页面内容一样，不必扫描整个数据表而找到想要的数据行。
create \[unique|fulltext|spatial\] index index_name on table_name(index_col_name,...);
　　在数据库中使用索引的优点如下，
1.  加速数据索引：索引能够以一列或多列值为基础实现快速查找数据行。
2.  优化查询：查询优化器是依赖于索引起作用的，索引能够加速连接、排序和分组等操作。
3.  强制实行的唯一性：通过给列创建唯一索引，可以保证表中的数据不重复。
　　使用索引设置索引的原则，一个表创建大量索引，会影响insert、update、delete语句的性能。应避免对经常更新的表创建过多的索引，要限制索引的数目。
　　若表的数据量大，对表数据的更新较少而查询较多，可以创建多个索引来提高新能。在包含大量重复值的列上创建索引，查询时间会较长。
　　经常需要排序、分组和联接操作的字段一定要建立索引，即将用于join、where、order by以及group by的字段上创建索引。
　　建议在主键上创建索引，在InnoDB中如果通过主键来访问数据，效率是非常高的。每个表只能创建一个主键索引。

**使用分区**
　　数据库分区是一种物理数据库设计技术，其主要目的是为了在特定的SQL操作中减少数据读写的总量以缩减响应时间。
　　分区分为水平分区和垂直分区。
　　水平分区是对表的行进行分区，通过这样的方式不同分组里面的物理列分割的数据集得以组合，从而进行个体分割（单分区）或集体分割（1个或多个分区）。所有在表中定义的列在每个数据集中都能找到，所以表的特性依然得以保持。
　　举例如下：一个包含十年发票记录的表可以被分区为十个不同的分区，每个分区包含的是其中一年的记录。（一定要通过某个属性列来分割，譬如这里使用的列就是年份）
　　在查询操作中，如果MySQL的优化器知道哪个分区中才包含特定查询中需要的数据，它就能直接去扫描那些分区的数据，而不用浪费很多时间扫描不需要的地方了。举个例子，百万行的表划分为10个分区，每个分区就包含十万行数据，那么查询分区需要的时间仅仅是全表扫描的十分之一了。同时对十万行的表建立索引的速度也会比百万行的快得多！
